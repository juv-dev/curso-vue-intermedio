name: Load values

on:
  push:
    branches: [main, develop]
  workflow_dispatch:

jobs:
  load-values:
    name: Load values
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Setup environment
        run: |
          # Create config directory if it doesn't exist
          mkdir -p config
          
          # Determine which file to use
          if [ "${{ github.ref_name }}" = "main" ]; then
            echo "Using production"
            cp .env.production config/.env 2>/dev/null || touch config/.env
          else
            echo "Using development"
            cp .env.development config/.env 2>/dev/null || touch config/.env
          fi
          
          # Show content (without sensitive data)
          echo "Environment file content:"
          grep -v '^#' config/.env || echo "File is empty"