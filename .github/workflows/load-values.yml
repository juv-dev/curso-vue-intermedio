name: Load Values

on:
  push:
    branches: [main, develop]
  workflow_dispatch:

jobs:
  load-values:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Load environment values
        run: |
          if [ "${{ github.ref_name }}" = "main" ]; then
            ENV_FILE=".env.production"
          else
            ENV_FILE=".env.development"
          fi
          
          if [ -f "$ENV_FILE" ]; then
            echo "Loading values from $ENV_FILE"
            # Set environment variables from file
            while IFS= read -r line; do
              if [[ ! -z "$line" ]] && [[ ! "$line" =~ ^\s*# ]]; then
                echo "$line" >> $GITHUB_ENV
              fi
            done < "$ENV_FILE"
          else
            echo "Warning: $ENV_FILE not found"
          fi