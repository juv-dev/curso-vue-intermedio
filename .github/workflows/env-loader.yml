name: Load Environment

on:
  push:
    branches: [main, develop]
  workflow_dispatch:

jobs:
  load-env:
    name: Load Environment
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
     
      - name: Setup environment
        run: |
          # Show project structure
          echo "Project structure:"
          ls -la
          
          # Create config directory
          mkdir -p config
          echo "Config directory created"
          
          # Check for .env files
          echo "Looking for .env files..."
          ls -la .env* 2>/dev/null || echo "No .env files found"
          
          # Copy file based on branch
          if [ "${{ github.ref_name }}" = "main" ]; then
            echo "Setting up for production"
            if [ -f ".env.production" ]; then
              cp .env.production config/.env
              echo "Copied .env.production"
            else
              touch config/.env
              echo "Created empty .env (production)"
            fi
          else
            echo "Setting up for development"
            if [ -f ".env.development" ]; then
              cp .env.development config/.env
              echo "Copied .env.development"
            else
              touch config/.env
              echo