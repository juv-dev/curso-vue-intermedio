name: Validate Permissions

on:
  workflow_run:
    workflows: ["Load Values"]
    types: [completed]
  pull_request:
    branches: [main, develop]

jobs:
  validate-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Validate target branch
        run: |
          if [ "${{ github.base_ref }}" != "main" ] && [ "${{ github.base_ref }}" != "develop" ]; then
            echo "Error: PR must target main or develop, but got ${{ github.base_ref }}"
            exit 1
          fi
          echo "Valid target branch: ${{ github.base_ref }}"